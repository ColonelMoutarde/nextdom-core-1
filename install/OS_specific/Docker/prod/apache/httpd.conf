<VirtualHost *:80>

        Define server_name sf4.local
        Define basedocroot  /var/www/html/
        Define logdir /var/www/html/log/

        ErrorDocument 404 /public/404.html
        ServerSignature Off

        <FilesMatch .php$>
         SetHandler "proxy:fcgi://sf4_php:9000"
        </FilesMatch>

        ServerName ${server_name}
        DocumentRoot ${basedocroot}
        ErrorLog ${logdir}/apache2_error.log
        CustomLog ${logdir}/apache2_access.log Combined

        <Directory ${basedocroot}>
            DirectoryIndex index.php
            Options -Indexes +FollowSymLinks
            AllowOverride All
            Require all granted
        </Directory>

        RewriteEngine On
        # RewriteCond %{HTTPS} off
        # RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

        RewriteCond %{REQUEST_URI} ^/?core/img/.*$
        RewriteRule ^/?core/img/(.*)$ /public/img/$1 [L,QSA]

        Undefine server_name
        Undefine basedocroot
        Undefine logdir
</VirtualHost>